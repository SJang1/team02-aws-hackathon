<!DOCTYPE html>
<html>
<head>
    <title>ClOps - AWS 서비스 추천 플랫폼</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        
        .navbar { background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); padding: 1rem 0; box-shadow: 0 2px 20px rgba(0,0,0,0.1); position: fixed; width: 100%; top: 0; z-index: 1000; }
        .nav-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 2rem; }
        .logo { font-size: 1.5rem; font-weight: bold; color: #333; }
        .nav-links { display: flex; list-style: none; gap: 2rem; }
        .nav-link { text-decoration: none; color: #333; font-weight: 500; transition: color 0.3s; padding: 0.5rem 1rem; border-radius: 8px; }
        .nav-link:hover, .nav-link.active { color: #667eea; background: rgba(102, 126, 234, 0.1); }
        
        .mobile-menu-btn { display: none; background: none; border: none; font-size: 1.5rem; color: #333; cursor: pointer; }
        .mobile-nav { display: none; position: absolute; top: 100%; left: 0; right: 0; background: rgba(255,255,255,0.98); backdrop-filter: blur(10px); box-shadow: 0 2px 20px rgba(0,0,0,0.1); }
        .mobile-nav.show { display: block; }
        .mobile-nav-links { list-style: none; padding: 1rem 0; }
        .mobile-nav-links li { padding: 0.5rem 2rem; }
        .mobile-nav-links .nav-link { display: block; padding: 0.75rem 0; border-radius: 0; }
        
        .tab-content { display: none; padding-top: 80px; }
        .tab-content.active { display: block; }
        
        .hero { text-align: center; padding: 4rem 2rem; color: white; }
        .hero h1 { font-size: 3rem; margin-bottom: 1rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .hero p { font-size: 1.2rem; max-width: 600px; margin: 0 auto; }
        .hero-subtitle { margin-top: 1rem; }
        .hero-subtitle p { font-size: 1rem; max-width: 700px; margin: 0 auto; }
        
        .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin: 4rem 2rem; padding: 0 2rem; }
        .feature { background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 16px; text-align: center; color: white; transition: transform 0.3s ease; }
        .feature:hover { transform: translateY(-10px) scale(1.05); }
        .feature i { font-size: 3rem; margin-bottom: 1rem; }
        
        .benefits-section { background: rgba(255,255,255,0.05); margin: 4rem 2rem; padding: 3rem 2rem; border-radius: 20px; color: white; text-align: center; }
        .benefits-section h2 { font-size: 2rem; margin-bottom: 3rem; }
        .benefits-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; }
        .benefit-card { background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 16px; }
        .benefit-amount { font-size: 2.5rem; font-weight: bold; color: #4CAF50; margin: 0.5rem 0; }
        
        .service-header { text-align: center; padding: 2rem; color: white; }
        .service-header h2 { font-size: 2rem; margin-bottom: 1rem; }
        .current-plan { margin-top: 1rem; }
        .plan-badge { background: #4CAF50; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: bold; }
        
        .pricing-section { padding: 4rem 2rem; color: white; }
        .pricing-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; max-width: 1200px; margin: 0 auto; }
        .pricing-card { background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 16px; text-align: center; position: relative; transition: all 0.3s ease; cursor: pointer; }
        .pricing-card:hover { border: 2px solid #4CAF50; transform: scale(1.05); }
        .pricing-card.selected { border: 3px solid #4CAF50; transform: scale(1.08); box-shadow: 0 0 30px rgba(76, 175, 80, 0.5); }
        
        .pricing-card.free { background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(200,200,200,0.2) 100%); }
        .pricing-card.standard { background: linear-gradient(135deg, rgba(76,175,80,0.2) 0%, rgba(139,195,74,0.3) 100%); }
        .pricing-card.pro { 
            background: linear-gradient(135deg, rgba(255,193,7,0.3) 0%, rgba(255,152,0,0.4) 25%, rgba(233,30,99,0.4) 50%, rgba(156,39,176,0.4) 75%, rgba(63,81,181,0.3) 100%);
            animation: rainbow-glow 3s ease-in-out infinite alternate;
        }
        
        @keyframes rainbow-glow {
            0% { box-shadow: 0 0 20px rgba(255,193,7,0.5); }
            25% { box-shadow: 0 0 25px rgba(255,152,0,0.6); }
            50% { box-shadow: 0 0 30px rgba(233,30,99,0.7); }
            75% { box-shadow: 0 0 25px rgba(156,39,176,0.6); }
            100% { box-shadow: 0 0 20px rgba(63,81,181,0.5); }
        }
        
        .plan-demo { position: absolute; top: -10px; right: -10px; background: #FF5722; color: white; padding: 0.3rem 0.6rem; border-radius: 12px; font-size: 0.8rem; font-weight: bold; display: none; }
        .pricing-card.selected .plan-demo { display: block; }
        
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
        .modal-content { background: white; margin: 15% auto; padding: 2rem; border-radius: 16px; width: 80%; max-width: 500px; text-align: center; }
        .modal-content h3 { color: #333; margin-bottom: 1rem; }
        .modal-content p { color: #666; margin-bottom: 2rem; }
        .modal-buttons { display: flex; gap: 1rem; justify-content: center; }
        .modal-btn { padding: 0.8rem 2rem; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: all 0.3s; }
        .modal-btn.confirm { background: #4CAF50; color: white; }
        .modal-btn.cancel { background: #f44336; color: white; }
        .modal-btn:hover { transform: translateY(-2px); }
        .plan-name { font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; }
        .plan-price { font-size: 2rem; margin-bottom: 1rem; }
        .plan-features { list-style: none; margin: 2rem 0; }
        .plan-features li { padding: 0.5rem 0; }
        .plan-features li.unavailable { opacity: 0.5; text-decoration: line-through; }
        
        .contact-section { padding: 4rem 2rem; color: white; }
        .contact-form { max-width: 600px; margin: 0 auto; background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 16px; }
        .form-group { margin-bottom: 1.5rem; }
        label { display: block; margin-bottom: 0.5rem; font-weight: 600; }
        input, textarea, select { width: 100%; padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 12px; font-size: 1rem; background: #f8f9fa; }
        input:focus, textarea:focus, select:focus { outline: none; border-color: #667eea; background: white; }
        
        .container { max-width: 800px; margin: 0 auto; padding: 2rem; }
        .card { background: white; border-radius: 20px; padding: 3rem; box-shadow: 0 20px 40px rgba(0,0,0,0.1); margin-top: -2rem; position: relative; z-index: 1; }
        
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; }
        .form-group.full-width { grid-column: 1 / -1; }
        
        .custom-input { display: none; margin-top: 0.5rem; }
        .custom-input.show { display: block; }
        #customResourceConfig { padding: 1rem; background: #f8f9fa; border-radius: 8px; margin-top: 1rem; }
        #customResourceConfig label { margin-top: 0.5rem; margin-bottom: 0.3rem; font-size: 0.85rem; }
        #customResourceConfig input { margin-bottom: 0.5rem; }
        
        .submit-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 16px 32px; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; width: 100%; transition: all 0.3s; }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3); }
        
        .loading { margin-top: 2rem; padding: 2rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; color: white; display: none; text-align: center; }
        .result { margin-top: 2rem; padding: 2rem; border-radius: 16px; color: white; display: none; }
        .result.success { background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%); }
        .result.error { background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%); }
        .service-item { background: rgba(255,255,255,0.1); margin: 0.5rem 0; padding: 1rem; border-radius: 8px; }
        .cost-summary { background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 8px; margin-top: 1rem; }
        .spinner { border: 4px solid rgba(255,255,255,0.3); border-top: 4px solid white; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 1rem; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        @media (max-width: 768px) {
            .form-grid { grid-template-columns: 1fr; }
            .hero h1 { font-size: 2rem; }
            .nav-links { display: none; }
            .mobile-menu-btn { display: block; }
            .pricing-grid { grid-template-columns: 1fr; }
            .benefits-grid { grid-template-columns: 1fr; }
            .nav-container { padding: 0 1rem; }
            .hero { padding: 2rem 1rem; }
            .container { padding: 1rem; }
            .card { padding: 2rem 1rem; }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo"><i class="fas fa-cloud"></i> ClOps</div>
            <ul class="nav-links">
                <li><a href="#" onclick="showTab('home')" class="nav-link active">홈</a></li>
                <li><a href="#" onclick="showTab('service')" class="nav-link">서비스</a></li>
                <li><a href="#" onclick="showTab('pricing')" class="nav-link">요금제</a></li>
                <li><a href="#" onclick="showTab('contact')" class="nav-link">문의</a></li>
            </ul>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <div id="mobile-nav" class="mobile-nav">
            <ul class="mobile-nav-links">
                <li><a href="#" onclick="showTab('home'); closeMobileMenu()" class="nav-link active">홈</a></li>
                <li><a href="#" onclick="showTab('service'); closeMobileMenu()" class="nav-link">서비스</a></li>
                <li><a href="#" onclick="showTab('pricing'); closeMobileMenu()" class="nav-link">요금제</a></li>
                <li><a href="#" onclick="showTab('contact'); closeMobileMenu()" class="nav-link">문의</a></li>
            </ul>
        </div>
    </nav>
    
    <!-- 홈 탭 -->
    <div id="home-tab" class="tab-content active">
        <section class="hero">
            <h1><i class="fas fa-magic"></i> ClOps</h1>
            <p>인디 개발자와 소규모 팀을 위한 AI 기반 AWS 아키텍처 추천 및 컨설팅 플랫폼</p>
            <div class="hero-subtitle">
                <p>갑작스러운 트래픽 급증에도 다운타임 없는 확장 가능한 인프라를 자동으로 설계해드립니다</p>
            </div>
        </section>
        
        <div class="features">
            <div class="feature">
                <i class="fas fa-shield-alt"></i>
                <h3>실패 방지</h3>
                <p>바이럴 성공 시점에 발생하는 치명적인 서버 다운을 선제적으로 방지</p>
            </div>
            <div class="feature">
                <i class="fas fa-expand-arrows-alt"></i>
                <h3>자동 확장</h3>
                <p>Auto Scaling과 Load Balancing이 포함된 확장 가능한 아키텍처 자동 설계</p>
            </div>
            <div class="feature">
                <i class="fas fa-brain"></i>
                <h3>AI 전문가</h3>
                <p>전문 DevOps 인력의 역할을 수행하여 비싼 전문성 격차 해소</p>
            </div>
        </div>
        
        <div class="benefits-section">
            <h2><i class="fas fa-trophy"></i> ClOps 사용의 이점</h2>
            <div class="benefits-grid">
                <div class="benefit-card">
                    <h3>비용 절약</h3>
                    <p class="benefit-amount">$32,000+</p>
                    <p>IaC 학습 비용 절약</p>
                </div>
                <div class="benefit-card">
                    <h3>다운타임 방지</h3>
                    <p class="benefit-amount">$50,000+</p>
                    <p>서버 다운 손실 예방</p>
                </div>
                <div class="benefit-card">
                    <h3>ROI</h3>
                    <p class="benefit-amount">477%</p>
                    <p>연간 투자 수익률</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 서비스 탭 -->
    <div id="service-tab" class="tab-content">
        <div class="service-header">
            <h2><i class="fas fa-cogs"></i> AWS 서비스 추천</h2>
            <div class="current-plan">
                <span class="plan-badge">Free 요금제</span>
            </div>
        </div>
        
        <div class="container">
            <div class="card">
                <form id="estimateForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="serviceType">서비스 유형:</label>
                            <select id="serviceType" required>
                                <option value="">선택하세요</option>
                                <option value="인디 게임">인디 게임</option>
                                <option value="웹사이트/웹앱">웹사이트/웹앱</option>
                                <option value="API 서버">API 서버</option>
                                <option value="모바일 앱 백엔드">모바일 앱 백엔드</option>
                                <option value="데이터 분석">데이터 분석</option>
                                <option value="머신러닝/AI">머신러닝/AI</option>
                                <option value="기타">기타</option>
                            </select>
                            <input type="text" id="customServiceType" class="custom-input" placeholder="서비스 유형을 직접 입력하세요">
                        </div>
                        
                        <div class="form-group">
                            <label for="expectedUsers">예상 사용자 수:</label>
                            <select id="expectedUsers" required>
                                <option value="">선택하세요</option>
                                <option value="소규모 (1-100명)">소규모 (1-100명)</option>
                                <option value="중간규모 (100-1,000명)">중간규모 (100-1,000명)</option>
                                <option value="대규모 (1,000-10,000명)">대규모 (1,000-10,000명)</option>
                                <option value="엔터프라이즈 (10,000명+)">엔터프라이즈 (10,000명+)</option>
                                <option value="기타">기타</option>
                            </select>
                            <input type="text" id="customExpectedUsers" class="custom-input" placeholder="사용자 수를 직접 입력하세요">
                        </div>
                        
                        <div class="form-group">
                            <label for="resourceAllocation">사용자당 리소스 할당:</label>
                            <select id="resourceAllocation" required>
                                <option value="권장 자동 할당" selected>권장 자동 할당 (AI 추천)</option>
                                <option value="사용자 지정">사용자 직접 설정</option>
                            </select>
                            <div id="customResourceConfig" class="custom-input">
                                <label for="cpuPerUser">CPU (GHz/사용자):</label>
                                <input type="number" id="cpuPerUser" step="0.1" min="0.1" placeholder="1.0">
                                <label for="memoryPerUser">메모리 (GB/사용자):</label>
                                <input type="number" id="memoryPerUser" step="0.1" min="0.1" placeholder="1.0">
                                <label for="storagePerUser">스토리지 (GB/사용자):</label>
                                <input type="number" id="storagePerUser" step="1" min="1" placeholder="10">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="region">AWS 리전:</label>
                            <select id="region" required>
                                <option value="ap-northeast-2" selected>서울 (ap-northeast-2)</option>
                                <option value="us-east-1">버지니아 북부 (us-east-1)</option>
                                <option value="us-west-2">오레곤 (us-west-2)</option>
                                <option value="ap-southeast-1">싱가포르 (ap-southeast-1)</option>
                                <option value="global-average">전체 리전 평균</option>
                                <option value="기타">기타</option>
                            </select>
                            <input type="text" id="customRegion" class="custom-input" placeholder="리전을 직접 입력하세요">
                        </div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="additionalInfo">추가 요구사항:</label>
                        <textarea id="additionalInfo" rows="3" placeholder="특별한 요구사항이나 기능을 입력하세요 (선택사항)"></textarea>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="budget"><i class="fas fa-dollar-sign"></i> 월 예산 (USD):</label>
                        <input type="number" id="budget" min="1" placeholder="100" required>
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-magic"></i> AWS 서비스 추천 받기
                    </button>
                </form>
                
                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <h3><i class="fas fa-robot"></i> AI가 분석 중입니다...</h3>
                    <p id="loading-tip">최적의 AWS 서비스 구성을 찾고 있습니다. 잠시만 기다려주세요.</p>
                </div>
                
                <div id="result" class="result">
                    <div id="result-content"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 요금제 탭 -->
    <div id="pricing-tab" class="tab-content">
        <div class="pricing-section">
            <h2 style="text-align: center; color: white; margin-bottom: 3rem;"><i class="fas fa-credit-card"></i> 요금제</h2>
            <div class="pricing-grid">
                <div class="pricing-card free" onclick="selectPlan('free', 'Free', '$0')">
                    <div class="plan-demo">DEMO</div>
                    <div class="plan-name">Free</div>
                    <div class="plan-price">$0<span style="font-size: 1rem;">/월</span></div>
                    <ul class="plan-features">
                        <li><i class="fas fa-check"></i> 기본 요금제 예측</li>
                        <li><i class="fas fa-check"></i> AI 기반 서비스 추천</li>
                        <li><i class="fas fa-check"></i> 월 5회 분석</li>
                        <li class="unavailable"><i class="fas fa-times"></i> 사용량 측정 보고서</li>
                        <li class="unavailable"><i class="fas fa-times"></i> 자동 관리</li>
                    </ul>
                </div>
                
                <div class="pricing-card standard" onclick="selectPlan('standard', 'Standard', '$29')">
                    <div class="plan-demo">DEMO</div>
                    <div class="plan-name">Standard</div>
                    <div class="plan-price">$29<span style="font-size: 1rem;">/월</span></div>
                    <ul class="plan-features">
                        <li><i class="fas fa-check"></i> 모든 Free 기능</li>
                        <li><i class="fas fa-check"></i> 사용량 측정 및 분석</li>
                        <li><i class="fas fa-check"></i> 상세 보고서 제작</li>
                        <li><i class="fas fa-check"></i> 월 50회 분석</li>
                        <li class="unavailable"><i class="fas fa-times"></i> 자동 관리 (미구현)</li>
                    </ul>
                </div>
                
                <div class="pricing-card pro" onclick="selectPlan('pro', 'Pro', '$99')">
                    <div class="plan-demo">DEMO</div>
                    <div class="plan-name">Pro</div>
                    <div class="plan-price">$99<span style="font-size: 1rem;">/월</span></div>
                    <ul class="plan-features">
                        <li><i class="fas fa-check"></i> 모든 Standard 기능</li>
                        <li><i class="fas fa-check"></i> 자동 인프라 관리 (미구현)</li>
                        <li><i class="fas fa-check"></i> 24/7 모니터링</li>
                        <li><i class="fas fa-check"></i> 무제한 분석</li>
                        <li><i class="fas fa-check"></i> 우선 지원</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 문의 탭 -->
    <div id="contact-tab" class="tab-content">
        <div class="contact-section">
            <h2 style="text-align: center; margin-bottom: 3rem;"><i class="fas fa-envelope"></i> 문의하기</h2>
            <div class="contact-form">
                <form id="contactForm">
                    <div class="form-group">
                        <label for="contactName">이름:</label>
                        <input type="text" id="contactName" required>
                    </div>
                    <div class="form-group">
                        <label for="contactEmail">이메일:</label>
                        <input type="email" id="contactEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="contactSubject">문의 유형:</label>
                        <select id="contactSubject" required>
                            <option value="">선택하세요</option>
                            <option value="일반 문의">일반 문의</option>
                            <option value="기술 지원">기술 지원</option>
                            <option value="요금제 문의">요금제 문의</option>
                            <option value="파트너십">파트너십</option>
                            <option value="기타">기타</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="contactMessage">메시지:</label>
                        <textarea id="contactMessage" rows="5" required placeholder="문의 내용을 자세히 적어주세요"></textarea>
                    </div>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-paper-plane"></i> 문의 보내기
                    </button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- 요금제 변경 모달 -->
    <div id="planModal" class="modal">
        <div class="modal-content">
            <h3>요금제 변경</h3>
            <p id="planModalText"></p>
            <div class="modal-buttons">
                <button class="modal-btn confirm" onclick="confirmPlanChange()">변경</button>
                <button class="modal-btn cancel" onclick="closePlanModal()">취소</button>
            </div>
        </div>
    </div>

    <script>
        // 랜덤 팁 배열
        const loadingTips = [
            '팁: Auto Scaling을 사용하면 트래픽 급증 시 자동으로 서버가 확장됩니다.',
            '팁: 인디 게임 데이브 더 다이버는 초기 100명에서 300만명으로 성장했습니다.',
            '팁: AWS Lambda를 사용하면 서버 관리 없이 코드만 실행할 수 있습니다.',
            '팁: RDS Multi-AZ를 사용하면 데이터베이스 장애 시 자동 복구됩니다.',
            '팁: CloudFront CDN을 사용하면 전 세계 사용자에게 빠른 속도를 제공합니다.',
            '팁: 서버 다운타임 1시간이 평균 $50,000의 손실을 발생시킵니다.',
            '팁: t2.micro 인스턴스는 AWS 프리티어에서 1년간 무료로 사용 가능합니다.',
            '팁: 예약 인스턴스를 사용하면 최대 75%까지 비용을 절약할 수 있습니다.',
            '팁: S3 Intelligent Tiering을 사용하면 자동으로 저장 비용이 최적화됩니다.',
            '팁: 로드 밸런서를 사용하면 서버 장애 시에도 서비스가 지속됩니다.',
            '팁: 모니터링을 설정하면 문제 발생 전에 미리 알림을 받을 수 있습니다.',
            '팁: 인디 게임 스컷은 첫 달에 100만 다운로드를 달성했습니다.'
        ];
        
        let tipInterval;
        let currentPlan = 'free';
        let selectedPlan = null;
        
        // 요금제 선택 함수
        function selectPlan(planType, planName, planPrice) {
            selectedPlan = { type: planType, name: planName, price: planPrice };
            
            // 모달 텍스트 설정
            const modalText = document.getElementById('planModalText');
            modalText.innerHTML = `<strong>${planName}</strong> 요금제(${planPrice}/월)로 변경하시겠습니까?<br><small>이는 데모 버전입니다.</small>`;
            
            // 모달 표시
            document.getElementById('planModal').style.display = 'block';
        }
        
        // 요금제 변경 확인
        function confirmPlanChange() {
            if (selectedPlan) {
                // 기존 선택 제거
                document.querySelectorAll('.pricing-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                // 새 요금제 선택
                document.querySelector(`.pricing-card.${selectedPlan.type}`).classList.add('selected');
                
                // 서비스 탭의 요금제 배지 업데이트
                const planBadge = document.querySelector('.plan-badge');
                planBadge.textContent = `${selectedPlan.name} 요금제`;
                planBadge.style.background = selectedPlan.type === 'free' ? '#4CAF50' : 
                                           selectedPlan.type === 'standard' ? '#FF9800' : 
                                           'linear-gradient(45deg, #FF6B6B, #4ECDC4, #45B7D1, #96CEB4, #FFEAA7)';
                
                currentPlan = selectedPlan.type;
                
                alert(`${selectedPlan.name} 요금제로 변경되었습니다! (데모)`);
            }
            closePlanModal();
        }
        
        // 모달 닫기
        function closePlanModal() {
            document.getElementById('planModal').style.display = 'none';
            selectedPlan = null;
        }
        
        // 모달 외부 클릭 시 닫기
        window.onclick = function(event) {
            const modal = document.getElementById('planModal');
            if (event.target === modal) {
                closePlanModal();
            }
        }
        
        // 랜덤 팁 표시 함수
        function showRandomTip() {
            const tipElement = document.getElementById('loading-tip');
            if (tipElement) {
                const randomTip = loadingTips[Math.floor(Math.random() * loadingTips.length)];
                tipElement.textContent = randomTip;
            }
        }
        
        // 모바일 메뉴 토글
        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobile-nav');
            mobileNav.classList.toggle('show');
        }
        
        // 모바일 메뉴 닫기
        function closeMobileMenu() {
            const mobileNav = document.getElementById('mobile-nav');
            mobileNav.classList.remove('show');
        }
        
        // 탭 전환 함수
        function showTab(tabName) {
            // 모든 탭 숨기기
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // 모든 네비게이션 링크 비활성화 (데스크톱 + 모바일)
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // 선택된 탭 보이기
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // 선택된 네비게이션 링크 활성화 (데스크톱 + 모바일)
            document.querySelectorAll(`[onclick*="showTab('${tabName}')"]`).forEach(link => {
                link.classList.add('active');
            });
        }
        
        // 커스텀 입력 토글 함수
        function toggleCustomInput(selectId, customInputId) {
            const select = document.getElementById(selectId);
            const customInput = document.getElementById(customInputId);
            
            select.addEventListener('change', function() {
                if (this.value === '기타') {
                    customInput.classList.add('show');
                    customInput.required = true;
                } else {
                    customInput.classList.remove('show');
                    customInput.required = false;
                    customInput.value = '';
                }
            });
        }
        
        // 커스텀 입력 기능 활성화
        toggleCustomInput('serviceType', 'customServiceType');
        toggleCustomInput('expectedUsers', 'customExpectedUsers');
        toggleCustomInput('region', 'customRegion');
        
        // 리소스 할당 옵션 처리
        document.getElementById('resourceAllocation').addEventListener('change', function() {
            const customConfig = document.getElementById('customResourceConfig');
            if (this.value === '사용자 지정') {
                customConfig.classList.add('show');
                document.getElementById('cpuPerUser').required = true;
                document.getElementById('memoryPerUser').required = true;
                document.getElementById('storagePerUser').required = true;
            } else {
                customConfig.classList.remove('show');
                document.getElementById('cpuPerUser').required = false;
                document.getElementById('memoryPerUser').required = false;
                document.getElementById('storagePerUser').required = false;
            }
        });
        
        // 서비스 폼 제출
        document.getElementById('estimateForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const serviceType = document.getElementById('serviceType').value === '기타' ? 
                document.getElementById('customServiceType').value : document.getElementById('serviceType').value;
            const expectedUsers = document.getElementById('expectedUsers').value === '기타' ? 
                document.getElementById('customExpectedUsers').value : document.getElementById('expectedUsers').value;
            
            const resourceAllocation = document.getElementById('resourceAllocation').value;
            let resourceConfig = {};
            if (resourceAllocation === '사용자 지정') {
                resourceConfig = {
                    type: 'custom',
                    cpuPerUser: parseFloat(document.getElementById('cpuPerUser').value),
                    memoryPerUser: parseFloat(document.getElementById('memoryPerUser').value),
                    storagePerUser: parseInt(document.getElementById('storagePerUser').value)
                };
            } else {
                resourceConfig = { type: 'auto' };
            }
            
            const region = document.getElementById('region').value === '기타' ? 
                document.getElementById('customRegion').value : document.getElementById('region').value;
            const additionalInfo = document.getElementById('additionalInfo').value;
            const budget = document.getElementById('budget').value;
            
            showLoading();
            
            try {
                const response = await fetch('/optimize', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        service_type: serviceType,
                        users: expectedUsers,
                        resource_config: resourceConfig,
                        additional_info: additionalInfo || '',
                        budget: parseInt(budget),
                        region: region 
                    })
                });
                
                const data = await response.json();
                
                if (data.error) {
                    showError(`오류: ${data.error}`);
                    return;
                }
                
                const uuid = data.uuid;
                if (!uuid) {
                    showError('UUID를 받지 못했습니다.');
                    return;
                }
                
                pollResult(uuid);
            } catch (error) {
                showError('오류가 발생했습니다.');
            }
        });
        
        // 문의 폼 제출
        document.getElementById('contactForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const contactData = {
                name: document.getElementById('contactName').value,
                email: document.getElementById('contactEmail').value,
                subject: document.getElementById('contactSubject').value,
                message: document.getElementById('contactMessage').value,
                timestamp: new Date().toISOString()
            };
            
            try {
                const response = await fetch('/contact', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(contactData)
                });
                
                if (response.ok) {
                    alert('문의가 성공적으로 전송되었습니다!');
                    document.getElementById('contactForm').reset();
                } else {
                    alert('문의 전송에 실패했습니다. 다시 시도해주세요.');
                }
            } catch (error) {
                alert('문의 전송 중 오류가 발생했습니다.');
            }
        });
        
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('result').style.display = 'none';
            
            // 팁 로테이션 시작
            showRandomTip();
            tipInterval = setInterval(showRandomTip, 3000); // 3초마다 팁 변경
        }
        
        function showResult(content, isSuccess = true) {
            // 팁 로테이션 중지
            if (tipInterval) {
                clearInterval(tipInterval);
            }
            
            document.getElementById('loading').style.display = 'none';
            const resultDiv = document.getElementById('result');
            resultDiv.className = isSuccess ? 'result success' : 'result error';
            resultDiv.style.display = 'block';
            document.getElementById('result-content').innerHTML = content;
        }
        
        function showError(message) {
            showResult(`<h3><i class="fas fa-exclamation-triangle"></i> 오류</h3><p>${message}</p>`, false);
        }
        
        async function pollResult(uuid) {
            if (!uuid || uuid === 'undefined') {
                showError('잘못된 UUID입니다.');
                return;
            }
            
            try {
                const response = await fetch(`/status/${uuid}`);
                const data = await response.json();
                
                if (data.status === 'completed') {
                    if (data.feasible) {
                        let content = '<h3><i class="fas fa-check-circle"></i> 분석 완료!</h3>';
                        content += '<div class="services-list">';
                        data.services.forEach(service => {
                            content += `<div class="service-item">`;
                            content += `<strong>${service.name}</strong> (${service.type})`;
                            content += `<br><span>$${service.monthly_cost}/월 - ${service.reason}</span>`;
                            content += `</div>`;
                        });
                        content += '</div>';
                        content += `<div class="cost-summary">`;
                        content += `<h4>비용 요약</h4>`;
                        content += `<p><strong>총 비용: $${data.total_cost}/월</strong></p>`;
                        content += `<p>예산 내 절약: $${data.savings}</p>`;
                        content += `</div>`;
                        showResult(content, true);
                    } else {
                        showResult(`<h3><i class="fas fa-exclamation-triangle"></i> 예산 부족</h3><p>${data.message}</p>`, false);
                    }
                } else if (data.status === 'failed') {
                    showError('처리 실패');
                } else {
                    setTimeout(() => pollResult(uuid), 2000);
                }
            } catch (error) {
                showError('폴링 오류');
            }
        }
        
        // 페이지 로드 시 Free 요금제 기본 선택
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('.pricing-card.free').classList.add('selected');
        });
    </script>
</body>
</html>